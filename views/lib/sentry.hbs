{{#ifneq @root.SENTRY_DSN false}}
<script src="/vendor-optimized/sentry/5.5.0/bundle.min.js"></script>
<script>
	Sentry.init({ dsn: '{{@root.SENTRY_DSN}}' });
	Sentry.configureScope((scope) => {
		{{#if @root.currentUser}}
		scope.setUser({ "id": "{{@root.currentUser._id}}" });
		{{/if}}
		scope.setTag({ "domain": "{{@root.env}}" });
		scope.setTag({ "env": "{{@root.env}}" });
		scope.setTag({ "release": "{{@root.version}}" });
		scope.setTag({ "sha": "{{@root.sha}}" });
		scope.setLevel('info');
	});
	window.onerror = function report(msg, url, lineNo, columnNo, error) {
		Sentry.captureException(error);
		return false;
	}
</script>
{{/ifneq}}
